<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Book Your Trip | One Sky Quest</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-white min-h-screen text-gray-800">

<!-- Booking Form (Manual Request) -->
<section class="py-12 px-4 bg-white rounded-2xl shadow-lg max-w-2xl mx-auto mt-12">
    <h2 class="text-3xl font-bold text-center mb-6">🗓️ Book Your Trip</h2>
    <form id="bookingForm" class="space-y-4">
    <input type="text" id="bookingName" placeholder="Your Name" required class="w-full p-3 border border-blue-300 rounded-xl focus:ring-2 focus:ring-blue-500" />
    <input type="email" id="bookingEmail" placeholder="Your Email" required class="w-full p-3 border border-blue-300 rounded-xl focus:ring-2 focus:ring-blue-500" />
    <textarea id="bookingDetails" placeholder="Trip Details..." required class="w-full p-3 border border-blue-300 rounded-xl h-32 resize-none focus:ring-2 focus:ring-blue-500"></textarea>
    <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-xl transition duration-200">Book Now</button>
    </form>
</section>

<!-- Divider -->
<div class="my-12 border-t border-gray-300 max-w-5xl mx-auto"></div>

<!-- Search Form -->
<section class="bg-white p-6 rounded-xl shadow-md max-w-5xl mx-auto">
    <h2 class="text-2xl font-bold mb-4">🔎 Search Stays</h2>
    <form id="searchForm" class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
    <div>
        <label class="block text-sm font-medium text-gray-700">Where to?</label>
        <input type="text" id="destination" placeholder="City or Country" required class="w-full p-2 border border-gray-300 rounded-md" />
    </div>
    <div>
        <label class="block text-sm font-medium text-gray-700">Check-in / Check-out</label>
        <input type="text" id="dates" placeholder="Jun 6 – Jun 13" required class="w-full p-2 border border-gray-300 rounded-md" />
    </div>
    <div>
        <label class="block text-sm font-medium text-gray-700">Travelers</label>
        <input type="text" id="travelers" placeholder="2 travelers, 1 room" required class="w-full p-2 border border-gray-300 rounded-md" />
    </div>
    <div>
        <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition">
        🔍 Search
        </button>
    </div>
    </form>
</section>

<!-- Search Results -->
<section class="max-w-6xl mx-auto mt-12 px-4">
    <h2 id="resultsHeading" class="text-2xl font-bold mb-4 text-blue-700 hidden"></h2>

    <!-- Sort dropdown -->
    <div id="sortBlock" class="mb-4 hidden">
    <label for="sortOptions" class="mr-2 font-medium">Sort by:</label>
    <select id="sortOptions" class="p-2 border rounded-md">
        <option value="recommended">Recommended</option>
        <option value="price-low">Price: low to high</option>
        <option value="price-high">Price: high to low</option>
        <option value="guest-rating">Guest rating</option>
        <option value="stars">Star rating</option>
    </select>
    </div>

    <div id="resultsList" class="grid gap-6 md:grid-cols-2 lg:grid-cols-3"></div>
</section>

<!-- Scripts -->
<script>
    // Submit booking form
    document.getElementById("bookingForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const name = document.getElementById("bookingName").value;
    const email = document.getElementById("bookingEmail").value;
    const tripDetails = document.getElementById("bookingDetails").value;

    fetch("https://your-backend-name.onrender.com/book", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name, email, tripDetails })
    })
    .then(res => res.text())
    .then(response => {
        alert(response);
        this.reset();
    })
    .catch(err => {
        console.error("Booking error:", err);
    });
    });

    // Search form logic
    document.getElementById("searchForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const destination = document.getElementById("destination").value;
    const dates = document.getElementById("dates").value;
    const travelers = document.getElementById("travelers").value;

    const heading = document.getElementById("resultsHeading");
    heading.classList.remove("hidden");
    heading.textContent = `Showing stays in ${destination} from ${dates} for ${travelers}`;

    document.getElementById("sortBlock").classList.remove("hidden");

    const listings = [
        {
        name: "DreamStay Resort",
        price: 248,
        rating: 4.8,
        stars: 5,
        img: "https://via.placeholder.com/300x200"
        },
        {
        name: "Budget Inn",
        price: 89,
        rating: 4.0,
        stars: 3,
        img: "https://via.placeholder.com/300x200"
        }
        // More listings can be added here
    ];

    function renderListings(sortBy = "recommended") {
        const container = document.getElementById("resultsList");
        container.innerHTML = "";

        let sorted = [...listings];
        if (sortBy === "price-low") sorted.sort((a, b) => a.price - b.price);
        if (sortBy === "price-high") sorted.sort((a, b) => b.price - a.price);
        if (sortBy === "guest-rating") sorted.sort((a, b) => b.rating - a.rating);
        if (sortBy === "stars") sorted.sort((a, b) => b.stars - a.stars);

        sorted.forEach(item => {
        container.innerHTML += `
            <div class="border rounded-md shadow-md p-4 bg-white">
            <img src="${item.img}" class="w-full h-40 object-cover rounded-md mb-3">
            <h3 class="text-lg font-bold">${item.name}</h3>
            <p>⭐ ${item.stars} stars | 👍 ${item.rating} guest rating</p>
            <p class="text-blue-600 font-semibold mt-2">$${item.price} / night</p>
            </div>
        `;
        });
    }

    renderListings();

    document.getElementById("sortOptions").addEventListener("change", (e) => {
        renderListings(e.target.value);
    });
    });
</script>
</body>
</html>
